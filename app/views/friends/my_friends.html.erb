<style>
@import url(//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css);

body {
    padding: 30px 0px 60px;
}
.panel > .list-group .list-group-item:first-child {
    /*border-top: 1px solid rgb(204, 204, 204);*/
}
@media (max-width: 767px) {
    .visible-xs {
        display: inline-block !important;
    }
    .block {
        display: block !important;
        width: 100%;
        height: 1px !important;
    }
}
#back-to-bootsnipp {
    position: fixed;
    top: 10px; right: 10px;
}


.c-search > .form-control {
   border-radius: 0px;
   border-width: 0px;
   border-bottom-width: 1px;
   font-size: 1.3em;
   padding: 12px 12px;
   height: 44px;
   outline: none !important;
}
.c-search > .form-control:focus {
    outline:0px !important;
    -webkit-appearance:none;
    box-shadow: none;
}
.c-search > .input-group-btn .btn {
   border-radius: 0px;
   border-width: 0px;
   border-left-width: 1px;
   border-bottom-width: 1px;
   height: 44px;
}


.c-list {
    padding: 0px;
    min-height: 44px;
}
.title {
    display: inline-block;
    font-size: 1.7em;
    font-weight: bold;
    padding: 5px 15px;
}
ul.c-controls {
    list-style: none;
    margin: 0px;
    min-height: 44px;
}

ul.c-controls li {
    margin-top: 8px;
    float: left;
}

ul.c-controls li a {
    font-size: 1.7em;
    padding: 11px 10px 6px;
}
ul.c-controls li a i {
    min-width: 24px;
    text-align: center;
}

ul.c-controls li a:hover {
    background-color: rgba(51, 51, 51, 0.2);
}

.c-toggle {
    font-size: 1.7em;
}

.name {
    font-size: 1.7em;
    font-weight: 700;
}

.c-info {
    padding: 5px 10px;
    font-size: 1.25em;
}

.circular-image {
  display: block;
    border-radius: 200px;
    box-sizing: border-box;
    background-color: #DDD;
    border: 5px solid #cfd8dc;
}

.btn-glyphicon { padding:2px; background:#ffffff; margin-right:4px; }
.icon-btn { padding: 2px 12px 2px 2px; border-radius:30px;}
/** The Magic **/
.btn-breadcrumb .btn:not(:last-child):after {
  content: " ";
  display: block;
  width: 0;
  height: 0;
  border-top: 17px solid transparent;
  border-bottom: 17px solid transparent;
  border-left: 10px solid white;
  position: absolute;
  top: 50%;
  margin-top: -17px;
  left: 100%;
  z-index: 3;
}
.btn-breadcrumb .btn:not(:last-child):before {
  content: " ";
  display: block;
  width: 0;
  height: 0;
  border-top: 17px solid transparent;
  border-bottom: 17px solid transparent;
  border-left: 10px solid rgb(173, 173, 173);
  position: absolute;
  top: 50%;
  margin-top: -17px;
  margin-left: 1px;
  left: 100%;
  z-index: 3;
}

/** The Spacing **/
.btn-breadcrumb .btn {
  padding:6px 12px 6px 24px;
}
.btn-breadcrumb .btn:first-child {
  padding:6px 6px 6px 10px;
}
.btn-breadcrumb .btn:last-child {
  padding:6px 18px 6px 24px;
}

/** Default button **/
.btn-breadcrumb .btn.btn-default:not(:last-child):after {
  border-left: 10px solid #fff;
}
.btn-breadcrumb .btn.btn-default:not(:last-child):before {
  border-left: 10px solid #ccc;
}
.btn-breadcrumb .btn.btn-default:hover:not(:last-child):after {
  border-left: 10px solid #ebebeb;
}
.btn-breadcrumb .btn.btn-default:hover:not(:last-child):before {
  border-left: 10px solid #adadad;
}

/** Primary button **/
.btn-breadcrumb .btn.btn-primary:not(:last-child):after {
  border-left: 10px solid #428bca;
}
.btn-breadcrumb .btn.btn-primary:not(:last-child):before {
  border-left: 10px solid #357ebd;
}
.btn-breadcrumb .btn.btn-primary:hover:not(:last-child):after {
  border-left: 10px solid #3276b1;
}
.btn-breadcrumb .btn.btn-primary:hover:not(:last-child):before {
  border-left: 10px solid #285e8e;
}

/** Success button **/
.btn-breadcrumb .btn.btn-success:not(:last-child):after {
  border-left: 10px solid #5cb85c;
}
.btn-breadcrumb .btn.btn-success:not(:last-child):before {
  border-left: 10px solid #4cae4c;
}
.btn-breadcrumb .btn.btn-success:hover:not(:last-child):after {
  border-left: 10px solid #47a447;
}
.btn-breadcrumb .btn.btn-success:hover:not(:last-child):before {
  border-left: 10px solid #398439;
}

/** Danger button **/
.btn-breadcrumb .btn.btn-danger:not(:last-child):after {
  border-left: 10px solid #d9534f;
}
.btn-breadcrumb .btn.btn-danger:not(:last-child):before {
  border-left: 10px solid #d43f3a;
}
.btn-breadcrumb .btn.btn-danger:hover:not(:last-child):after {
  border-left: 10px solid #d2322d;
}
.btn-breadcrumb .btn.btn-danger:hover:not(:last-child):before {
  border-left: 10px solid #ac2925;
}

/** Warning button **/
.btn-breadcrumb .btn.btn-warning:not(:last-child):after {
  border-left: 10px solid #f0ad4e;
}
.btn-breadcrumb .btn.btn-warning:not(:last-child):before {
  border-left: 10px solid #eea236;
}
.btn-breadcrumb .btn.btn-warning:hover:not(:last-child):after {
  border-left: 10px solid #ed9c28;
}
.btn-breadcrumb .btn.btn-warning:hover:not(:last-child):before {
  border-left: 10px solid #d58512;
}

/** Info button **/
.btn-breadcrumb .btn.btn-info:not(:last-child):after {
  border-left: 10px solid #5bc0de;
}
.btn-breadcrumb .btn.btn-info:not(:last-child):before {
  border-left: 10px solid #46b8da;
}
.btn-breadcrumb .btn.btn-info:hover:not(:last-child):after {
  border-left: 10px solid #39b3d7;
}
.btn-breadcrumb .btn.btn-info:hover:not(:last-child):before {
  border-left: 10px solid #269abc;
}
</style>

<script>
$(document).ready(function () {
  $('#NewMessage').on('show.bs.modal', function (event) {

    var link = $(event.relatedTarget) // Button that triggered the modal
    var recipient = link.data('whatever') // Extract info from data-* attributes
    $("#email").val(recipient);
    $("#email_hidden").val(recipient);
  })
});
//triggered when modal is about to be shown

</script>
<br/>
<div class="container">
  <div class="row">
      <div class="btn-group btn-breadcrumb">
        <a href="<%= messages_path %>" class="btn btn-primary"><i class="glyphicon glyphicon-home">Inbox</i></a>
        <a href="<%= friends_list_path %>" class="btn btn-info">Add Friends</a>
        <a href="<%= friends_myfriends_path %>" class="btn btn-success">My Friends</a>
        <a href="<%= friends_myfriends_path %>?type=sent" class="btn btn-warning">Friends Sent</a>
        <a href="<%= friends_myfriends_path%>?type=requested" class="btn btn-danger">Incoming Friends</a>
      </div>
  </div>
</div>
<br/>

<!-- Modal -->
<div aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-1" id="NewMessage" class="modal fade" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button aria-hidden="true" data-dismiss="modal" class="close" type="button" tabindex="1">Ã—</button>
                <h4 class="modal-title">New Message</h4>
            </div>
            <div class="modal-body">
              <%= form_tag(messages_path, :method => "post", id: "new-message-form", :class => 'form-horizontal' ) do %>
              <div class="form-group">
                  <label class="col-lg-2 control-label">To</label>
                  <div class="col-lg-10">
                      <%= hidden_field_tag :email_hidden %>
                      <%= text_field_tag :email, params[:email], class: "form-control", :disabled => true, id: 'email', tabindex: 2 %>
                  </div>
              </div>
              <!--
                <div class="form-group">
                    <label class="col-lg-2 control-label">Cc / Bcc</label>
                    <div class="col-lg-10">
                        <input type="text" placeholder="" id="cc" class="form-control">
                    </div>
                </div>
            -->
              <div class="form-group">
                  <label class="col-lg-2 control-label">Subject</label>
                  <div class="col-lg-10">
                      <%= text_field_tag :subject, params[:subject], class: "form-control", tabindex: 3 %>
                  </div>
              </div>
              <div class="form-group">
                  <label class="col-lg-2 control-label">Message</label>
                  <div class="col-lg-10">
                    <%= text_area_tag :body, params[:body], rows: 10, cols: 30, class: "form-control", tabindex: 4 %>
                  </div>
              </div>

              <div class="form-group">
                  <div class="col-lg-offset-2 col-lg-10">
                    <!--
                      <span class="btn green fileinput-button">
                        <i class="fa fa-plus fa fa-white"></i>
                        <span>Attachment</span>
                        <input type="file" name="files[]" multiple="">
                      </span>
                    -->
                      <%= submit_tag "Send", class: "btn btn-send", tabindex: 5 %>
                  </div>
              </div>

              <% end %>

            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<% @users.each.with_index do |user, index| %>
  <% if index.even? %>
    <div class="row">
       <div class="col-lg-6">
         <li class="list-group-item">
             <div class="col-xs-12 col-sm-3">
                 <img style="width: 100px; height: 100px;"src="<%= user.avatar %>" alt="<%= user.first_name %> <%= user.last_name %>" class="circular-image" data-toggle="tooltip" title="<%= user.first_name %> <%= user.last_name %>"/>
             </div>
             <div class="col-xs-12 col-sm-9">
                 <span class="glyphicon glyphicon-map-marker text-muted c-info" ></span>
                 <span class="name"><%= user.display_name %></span><br/>
                 <span class="fa fa-comments text-muted c-info" data-toggle="tooltip" title="<%= user.email %>"></span>
                 <span class="visible-xs"> <span class="text-muted"><%= user.email %></span><br/></span>
                 <% if current_user.friend_status_with(user.id) == 0 %>
                  <span class="visible-xs"> <span class="text-muted">Waiting for accept</span><br/></span>
                 <% else %>
                  <% if current_user.friend_status_with(user.id) == 1%>
                    <%= link_to "Accept Friend Request", friends_accept_path(friend_id: user.id),:method=> :post, class: "btn icon-btn btn-success" %>
                  <% else %>
                  <a href="#NewMessage" data-toggle="modal"  title="Compose" data-whatever="<%=user.email%>" class="btn icon-btn btn-success" id="<%=user.id%>">
                      Send Message
                  </a>
                  <% end %>
                 <% end %>
             </div>
             <div class="clearfix"></div>
         </li>
       </div>
  <% else %>
      <div class="col-lg-6">
        <li class="list-group-item">
            <div class="col-xs-12 col-sm-3">
                <img style="width: 100px; height: 100px;"src="<%= user.avatar %>" alt="<%= user.first_name %> <%= user.last_name %>" class="circular-image" data-toggle="tooltip" title="<%= user.first_name %> <%= user.last_name %>"/>
            </div>
            <div class="col-xs-12 col-sm-9">
                <span class="glyphicon glyphicon-map-marker text-muted c-info" ></span>
                <span class="name"><%= user.display_name %></span><br/>
                <span class="fa fa-comments text-muted c-info" data-toggle="tooltip" title="<%= user.email %>"></span>
                <span class="visible-xs"> <span class="text-muted"><%= user.email %></span><br/></span>
                <% if current_user.friend_status_with(user.id) == 0 %>
                 <span class="visible-xs"> <span class="text-muted">Waiting for accept</span><br/></span>
                <% else %>
                 <% if current_user.friend_status_with(user.id) == 1%>
                   <%= link_to "Accept Friend Request", friends_accept_path(friend_id: user.id),:method=> :post, class: "btn icon-btn btn-success" %>
                 <% else %>
                 <a href="#NewMessage" data-toggle="modal"  title="Compose" data-whatever="<%=user.email%>"  class="btn icon-btn btn-success" id="<%=user.id%>">
                     Send Message
                 </a>
                 <% end %>
                <% end %>
            </div>
            <div class="clearfix"></div>
        </li>
      </div>
    </div>
  <% end %>
<% end %>

</div>
